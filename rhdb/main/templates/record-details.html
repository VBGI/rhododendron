{%extends 'base.html' %}
{%load static %}
{%block main%}
 <div class="col-md-12 base-main">
    <h3 class="pb-3 mb-4 font-italic border-bottom">{{object.species.name}}</h3>

    <a class="show-info" href="#">Показать инофрмацию о виде</a>
    <div class="hidden" style="display: none;">{{object.species.info|safe}}</div>

     <div class="base-post">
      <h4 style="text-align: center">Информация о сборе</h4>

        {%if object.num %}
         <p><strong> Инвентарный номер образца:</strong>  {{object.num}}</p>
        {%endif%}

        {%if object.latitude and object.longitude %}
         <h5>Географические координаты: </h5>
         <p><strong> Широта:</strong>  {{object.latitude}}&deg;N; <strong> Долгота:</strong>  {{object.longitude}}&deg;E</p>
         <hr/>
         <div id="record-map" style="width: 100%; min-height: 300px"></div>
         <hr/>


        {%endif%}

         {%if object.region %}
          <p><strong>Регион:</strong>  {{object.region|capfirst}}</p>
         {%endif%}

         {%if object.district %}
          <p><strong>Район:</strong>  {{object.district|capfirst}}</p>
         {%endif%}

         {%if object.source %}
         <p><strong> Происхождение образца:</strong>  {{object.source}}</p>
         {%endif%}

         {%if object.place %}
          <p><strong> Место сбора:</strong>  {{object.place|capfirst}}</p>
         {%endif%}

         {%if object.forest_type %}
         <p><strong>Тип леса:</strong>  {{object.forest_type|capfirst}}</p>
         {%endif%}

         {%if object.soil_type %}
         <p><strong>Дополнительно:</strong> {{object.soil_type|capfirst}}</p>
         {%endif%}

         {%if object.collectors %}
         <p><strong>Собрал(и):</strong> {{object.collectors|capfirst}}</p>
         {%endif%}

         {%if object.collection_date %}
         <p><strong>Дата сбора:</strong>  {{object.collection_date}}</p>
         {%endif%}

         {%if object.content %}
         <p>Общая информация: </p>
         {{object.content|safe}}
         {%endif%}
     </div>
 </div>
{%endblock%}

{%block map_js%}
<script src="//api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
<script>
$(document).ready(function(){
$(".show-info").click(function(){
if (!$(".hidden").is(":visible")) {
$(".show-info").html('Скрыть информацию о виде')}
else {$(".show-info").html('Показать информацию о виде</p>')}
$(".hidden").toggle({'duration': 1000});
})})

function init () {
    var myMap = new ymaps.Map('record-map', {
            center: [{{object.latitude}}, {{object.longitude}}],
            zoom: 8,
            controls: []
        }),
        objectManager = new ymaps.ObjectManager({
            clusterize: true,
            clusterDisableClickZoom: true
        });
    myMap.geoObjects.add(objectManager);
    myMap.controls.add(new ymaps.control.ZoomControl());
    myMap.controls.add('typeSelector');

    recordGeoObject = new ymaps.GeoObject({
        geometry: {
            type: "Point",
            coordinates: [{{object.latitude}}, {{object.longitude}}]
       },
        properties: {
            hintContent: "{{object.species.name}}:({{object.latitude}}, {{object.longitude}})"
        }
    });

    myMap.geoObjects.add(recordGeoObject);


    }

ymaps.ready(init);
</script>
{%endblock%}